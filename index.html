<!DOCTYPE html>
<html>
<head>
    
</head>

<body>
    <header class="header">
        <h1>My Library</h1>
        <div class="logIn">
          <button class="btn" id="logInBtn">Login</button>
        </div>
        <div class="logOut">
          <button class="btn" id="logOutBtn">Log out</button>
        </div>
        <div class="Browse">
            <button class="btn" id="browseBtn">Browse</button>
        </div>
    </header>



</body>
<script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-analytics.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";
    const firebaseConfig = {
      apiKey: "AIzaSyDomy_iTgvqoDAFqJmU1sjLditwOKFdf_o",
      authDomain: "cpsc254library.firebaseapp.com",
      projectId: "cpsc254library",
      storageBucket: "cpsc254library.appspot.com",
      messagingSenderId: "783490531388",
      appId: "1:783490531388:web:bfe47ed7a478703f52c339",
      measurementId: "G-T5TJPH6M0G",
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    //user login/logout
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();
    const logInBtn = document.getElementById('logInBtn')
    const logOutBtn = document.getElementById('logOutBtn')
    const browseBtn = document.getElementById('browseBtn')

    const userSignIn = async() => {
        signInWithPopup(auth, provider).then((result) => {
            const user = result.user
            console.log(user);
            window.location = 'adminPage.html';
            
        }).catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            console.log(error);
        })
    }


    const userSignOut = async() => {
        signOut(auth).then(() => {
            alert("You have signed out successfully")
        }).catch((error) => {})
    }

    function userPage(){
        window.location = 'userPage.html';
        console.log('test');
    }

    logInBtn.addEventListener("click", userSignIn);
    logOutBtn.addEventListener("click", userSignOut);
    browseBtn.addEventListener("click", userPage);
    

</script>
</html>